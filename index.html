<!DOCTYPE html>
<html>

<head>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: #000000;
      width: 100vw;
      height: 100vh;
      position: relative;
    }

    .container {
      width: 55vh;
      height: 30vh;

      transform: translate(-50%, -50%) rotate(270deg);
      position: absolute;
      top: 50%;
      left: 50%;
    }

    .wrapper {
      width: 100%;
      height: 100%;
    }

    .can {
      /* https://codepen.io/alvaromontoro/embed/OJwWPOB?default-tab=result */
      background:
        repeating-linear-gradient(0deg, transparent 0 13%, #ffffff02 0 calc(13% + 1px), transparent 0) 30% 0% / 100% 40%,
        repeating-linear-gradient(0deg, transparent 0 7%, #ffffff03 0 calc(7% + 1px), transparent 0) 70% 0% / 100% 33%,
        repeating-linear-gradient(0deg, transparent 0 11%, #ffffff02 0 calc(11% + 1px), transparent 0) -10% 0% / 100% 35%,
        repeating-linear-gradient(0deg, transparent 0 17%, #ffffff04 0 calc(17% + 1px), transparent 0) 110% 0% / 100% 27%,
        repeating-linear-gradient(0deg, transparent 0 13%, #00000003 0 calc(13% + 1px), transparent 0) 60% -10% / 100% 33%,
        repeating-linear-gradient(0deg, transparent 0 8%, #00000002 0 calc(8% + 1px), transparent 0) 21% 2% / 100% 27%,
        repeating-linear-gradient(0deg, transparent 0 8%, #00000001 0 calc(8% + 1px), transparent 0) 31% 7% / 100% 19%,

        #F40009;
      width: 100%;
      height: 100%;

      border-top-left-radius: 2vw 5vw;
      border-bottom-left-radius: 2vw 5vw;
      border-top-right-radius: 5vw 2vw;
      border-bottom-right-radius: 5vw 2vw;

      border-right: 1vw solid #E6EDf5;
      border-left: 1vw solid #E6EDf5;
    }

    .logo {
      color: #ffffff;
      text-align: center;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      transform: translate(-50%, -50%);
      font-family: 'Georgia' serif;
      font-size: 8vh;
    }

    .tab {
      position: absolute;
      top: 50%;
      left: 100%;
      width: 8vh;
      height: 1.5vh;
      transform: rotate(80deg);
      transform-origin: 0% 0%;
      background-color: #E6EDf5;
      border-radius: 1vh;
    }

    .tab:hover {
      cursor: pointer;
    }

    .shake {
        animation-name: shake;
        animation-duration: 1s;
        transform-origin: 50% 50%;
        animation-iteration-count: infinite;
      }
  </style>
</head>

<body>
  <div class="container">
    <div class="wrapper shake">
      <div class="can">
        <div class="logo">
          Riley Cola
        </div>
      </div>
      <div class="tab"></div>
    </div>
  </div>

  <!-- https://stackoverflow.com/a/36964181 -->
  <style id="shake">

  </style>
  <script>
    console.log("hi riley");
    const can = document.querySelector('.can');
    const tab = document.querySelector('.tab');
    const shake = document.querySelector('#shake');
    var fizz = 0;

    function openCan() {
      console.log("openCan");
      fizz = 0;
    }

    // 0 to 10
    function generateShake(intensity) {
      if (intensity <= 0) {
        shake.innerHTML = "";
        return;
      }

      var pxIntensity = intensity / 10;
      var rotateIntensity = intensity / 10;

      shake.innerHTML = `
        @keyframes shake {
        0% {
          transform: translate(${2 * pxIntensity}px, ${1 * pxIntensity}px) rotate(${0 * rotateIntensity}deg);
        }

        10% {
          transform: translate(${-1 * pxIntensity}px, ${-2 * pxIntensity}px) rotate(${-1 * rotateIntensity}deg);
        }

        20% {
          transform: translate(${-3 * pxIntensity}px, ${0 * pxIntensity}px) rotate(${1 * rotateIntensity}deg);
        }

        30% {
          transform: translate(${0 * pxIntensity}px, ${2 * pxIntensity}px) rotate(${0 * rotateIntensity}deg);
        }

        40% {
          transform: translate(${1 * pxIntensity}px, ${-1 * pxIntensity}px) rotate(${1 * rotateIntensity}deg);
        }

        50% {
          transform: translate(${-1 * pxIntensity}px, ${2 * pxIntensity}px) rotate(${-1 * rotateIntensity}deg);
        }

        60% {
          transform: translate(${-3 * pxIntensity}px, ${1 * pxIntensity}px) rotate(${0 * rotateIntensity}deg);
        }

        70% {
          transform: translate(${2 * pxIntensity}px, ${1 * pxIntensity}px) rotate(${-1 * rotateIntensity}deg);
        }

        80% {
          transform: translate(${-1 * pxIntensity}px, ${-1 * pxIntensity}px) rotate(${1 * rotateIntensity}deg);
        }

        90% {
          transform: translate(${2 * pxIntensity}px, ${2 * pxIntensity}px) rotate(${0 * rotateIntensity}deg);
        }

        100% {
          transform: translate(${1 * pxIntensity}px, ${-2 * pxIntensity}px) rotate(${-1 * rotateIntensity}deg);
        }
      }
      `;
    }

    tab.addEventListener("click", event => {
      openCan();
    });

    addEventListener("mousemove", (event) => {
      fizz += Math.abs(event.movementX);
      fizz += Math.abs(event.movementY);
    });

    addEventListener("devicemotion", (event) => {
      fizz += Math.abs(event.acceleration.x);
      fizz += Math.abs(event.acceleration.y);
      fizz += Math.abs(event.acceleration.z);
    });

    setInterval(() => {
      if (fizz < 100) {
        generateShake(0);
      } else if (fizz >= 20000) {
        openCan();
      } else {
        intensity = Math.min(fizz / 200, 20);
        generateShake(intensity)
      }

      fizz -= 20;
    }, 100);
  </script>
</body>

</html>